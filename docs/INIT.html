
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>init Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="BUILDSYNCACTIONCREATOR.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">API</li>
        
        
    
        <li class="chapter active" data-level="2.1" data-path="INIT.html">
            
                <a href="INIT.html">
            
                    
                    init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="BUILDSYNCACTIONCREATOR.html">
            
                <a href="BUILDSYNCACTIONCREATOR.html">
            
                    
                    buildSyncActionCreator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="REQUEST.html">
            
                <a href="REQUEST.html">
            
                    
                    request
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="BUILDREDUCERS.html">
            
                <a href="BUILDREDUCERS.html">
            
                    
                    buildReducers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="UTILS.md">
            
                <span>
            
                    
                    utils
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >init</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="1-initoptions-object">1. init(options: object)</h1>
<p>Main function of the RSA. Call this before initialization of the store. Remember, that your
reducers are created while store initialization, so they have to have access to the
configuration object. <strong>Best practise is to create file in which <code>init()</code> is called and
importing that file before importing store in your app.</strong> See demo for example.</p>
<p>Example:</p>
<pre><code class="lang-js"><span class="hljs-comment">// apiInitialization.js</span>

<span class="hljs-keyword">import</span> { init } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;redux-simple-api&quot;</span>;

init({
    <span class="hljs-comment">// configuration</span>
});

<span class="hljs-comment">// index.js</span>

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./apiInitialization&quot;</span>; <span class="hljs-comment">// initialization of RSA fired..</span>
<span class="hljs-keyword">import</span> { store } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./configureStore&quot;</span> <span class="hljs-comment">// now reducers have access to the RSA config</span>
</code></pre>
<h2 id="options">Options:</h2>
<h4 id="suffixes--start-string-success-string-error-string-">suffixes: { start: string, success: string, error: string }</h4>
<p>Required. Strings that are attached to the three main actions dispatched during the request.
They have to be unique, otherwise reducers can handle your actions properly.</p>
<pre><code class="lang-js">init({
    suffixes: {
        start: <span class="hljs-string">&quot;started&quot;</span>,
        error: <span class="hljs-string">&quot;failed&quot;</span>,
        success: <span class="hljs-string">&quot;done&quot;</span>
    }
});
<span class="hljs-comment">// now if you fire action with base type `users/all`</span>
<span class="hljs-comment">// RSA will dispatch `users/all/started` and `users/all/done` if</span>
<span class="hljs-comment">// everything was ok, or `user/all/failed` if request failed</span>
</code></pre>
<h4 id="beforerequest-requestconfig-object-dispatch-function-getstate-function--requestconfig">beforeRequest (requestConfig: object, dispatch: Function, getState: function) : requestConfig</h4>
<p>Called before request is made. You have access to the entire request configuration, so you can use
this hook to apply some default configuration or dispatch another action.</p>
<pre><code class="lang-js">init({
    beforeRequest: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">requestConfig, dispatch, getState</span>) </span>{
        <span class="hljs-keyword">const</span> newConfig = {
            ...requestConfig, <span class="hljs-comment">// get existing config...</span>
            headers: { <span class="hljs-comment">// override headers of the request</span>
                token: getState().auth.token <span class="hljs-comment">// set up token using redux store</span>
            }
        };

        <span class="hljs-keyword">return</span> newConfig;
    }
});
</code></pre>
<h4 id="onerror-error-object-dispatch-function-getstate-function--error">onError (error: object, dispatch: Function, getState: function) : error</h4>
<p>Called when error came from the server. You have access to the provided error and
you can modify it there or call some additional action. You have to return new error from that function.</p>
<pre><code class="lang-js">init({
    onError: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error, dispatch</span>) </span>{
        <span class="hljs-comment">// dispatch action increasing counter of failed</span>
        <span class="hljs-comment">// requests in the application</span>
        dispatch({
            type: <span class="hljs-string">&quot;stats/requests/failed/push&quot;</span>,
            payload: error
        });

        <span class="hljs-keyword">return</span> error;
    }
});
</code></pre>
<h4 id="onsuccess-response-object-dispatch-function-getstate-function--response">onSuccess (response: object, dispatch: Function, getState: function) : response</h4>
<p>Called after succeeded request. In that hook you have access to the response object, and you can
use it to call any other action or modify response data etc.</p>
<pre><code class="lang-js">init({
    onSuccess: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response, dispatch</span>) </span>{
        <span class="hljs-comment">// get new session token from the response</span>
        <span class="hljs-comment">// and write it to the store</span>
        dispatch({
            type: <span class="hljs-string">&quot;user/setToken&quot;</span>,
            payload: {
                token: response.headers[<span class="hljs-string">&quot;SESSION-TOKEN&quot;</span>]
            }
        });

        <span class="hljs-keyword">return</span> response;
    }
});
</code></pre>
<h4 id="errortransformation-error-object--object">errorTransformation (error: object) : object</h4>
<p>Called in every reducer handling errors. You can use that to apply some global transformations for
errors dispatched from the actions before they are save in the store.</p>
<pre><code class="lang-js">init({
    <span class="hljs-comment">// get `reasons` property from the JSON representation</span>
    <span class="hljs-comment">// of the error provided by your backend service</span>
    errorTransformation: error =&gt; error.response.data.reasons
});
</code></pre>
<h4 id="datatransformation-data-object--object">dataTransformation (data: object) : object</h4>
<p>Called in every reducer handling succeeded request. You can use that to apply some global transformations for
payload data dispatched from the actions before they are save in the store.</p>
<pre><code class="lang-js">init({
    <span class="hljs-comment">// get `message` property from JSON with data</span>
    <span class="hljs-comment">// returned from the backend</span>
    errorTransformation: data =&gt; data.message
});
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="BUILDSYNCACTIONCREATOR.html" class="navigation navigation-next " aria-label="Next page: buildSyncActionCreator">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"init","level":"2.1","depth":1,"next":{"title":"buildSyncActionCreator","level":"2.2","depth":1,"path":"BUILDSYNCACTIONCREATOR.md","ref":"BUILDSYNCACTIONCREATOR.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"INIT.md","mtime":"2018-01-13T14:31:59.984Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-01-13T14:34:22.201Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

